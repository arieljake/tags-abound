

module.exports.findUserById = function(db,id,callback)
{
	db.collection("v1_user").find({_id: id},{limit: 1}).toArray(function (err,items) {
		callback(items[0]);
	});
};

module.exports.findUserByLogin = function (db,login,callback)
{
	db.collection("v1_user").find({username: login.username, password: login.password},{limit: 1}).toArray(function (err,items) {
		callback(items.length === 1 ? items[0] : null);
	});
};

module.exports.createUser = function (db,user,callback)
{
	db.collection("v1_user").find({username: user.username},{username: 1},{limit: 1}).toArray(function (err,items) {

		if (items.length === 0)
		{
			db.collection("v1_user").insert(user,function (err,items) {
				callback(true);
			});
		}
		else
		{
			callback("that username is already being used");
		}
	});
};