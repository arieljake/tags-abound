
var validUpdateUserFields = [
	"firstName",
	"lastName",
	"location",
	"sex",
	"tags"
];

var validUpdateUserPasswordFields = [
	"curPassword",
	"newPassword",
	"newPassword2",
];

module.exports.prepareForUpdate = function (updateValues,savedUser)
{
	for (var key in updateValues)
	{
		if (validUpdateUserFields.indexOf(key) >= 0)
		{
			savedUser[key] = updateValues[key];
		}
	}

	delete savedUser._id;

	return savedUser;
};

module.exports.prepareForUpdatePassword = function (updateValues,savedUser)
{
	if (updateValues.curPassword != savedUser.password)
		return null;

	if (updateValues.newPassword != updateValues.newPassword2)
		return null;

	if (!isValidPassword(updateValues.newPassword))
		return null;

	savedUser.password = updateValues.newPassword;

	delete savedUser._id;

	return savedUser;
};

var isValidPassword = function (password)
{
	return password.length >= 4;
};