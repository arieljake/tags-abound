
var listly = require('listly');

var ListREST = module.exports.ListREST = function (listlyServer)
{
	this.listDAO = listlyServer.listDAO;

	var app = listlyServer.app;
	app.get('/lists', listly.utils.routeHandler(this,this.getAllLists));
	app.get('/list/:listId', listly.utils.routeHandler(this,this.getListById("listId")));
};

ListREST.prototype.getAllLists = function (req,res)
{
	this.listDAO.findAllLists(function(items)
	{
		res.send(items);
	});
};

ListREST.prototype.getListById = function (idParamName)
{
	return function (req,res)
	{
		var listId = req.params[idParamName];

		this.listDAO.findListById(listId,function(item)
		{
			res.send(item);
		});
	};
};