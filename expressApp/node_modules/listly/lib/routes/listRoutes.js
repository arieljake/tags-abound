
var listly = require('listly');

var ListRoutes = module.exports.ListRoutes = function (listlyServer)
{
	this.listDAO = listlyServer.listDAO;
};

ListRoutes.prototype.home = function(req, res)
{
	this.listDAO.findAllLists(function (err,lists)
	{
		res.render('lists/home/index', listly.renderUtils.params(req,{title: "Lists", lists: lists}));
	});
};

ListRoutes.prototype.detail = function (listIdParam)
{
	var self = this;

	return function(req, res)
	{
		var listId = req.params[listIdParam];

		self.listDAO.findListById(listId, function (err,list)
		{
			res.render('lists/detail/index', listly.renderUtils.params(req,{title: "Lists", list: list.value}));
		});
	};
};