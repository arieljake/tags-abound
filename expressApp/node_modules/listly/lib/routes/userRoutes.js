
var listly = require('listly');

var UserRoutes = module.exports.UserRoutes = function (listlyServer)
{
	this.userDAO = listlyServer.userDAO;
};

UserRoutes.prototype.home = function(req, res)
{
	res.render('user/home/index', listly.renderUtils.params(req,{title: "Home"}));
};

UserRoutes.prototype.profile = function (usernameParam)
{
	var self = this;

	return function (req,res)
	{
		var username = req.params[usernameParam];

		self.userDAO.findUserByUsername(username, function (err,user)
		{
			if (err !== null || user === null)
			{
				res.writeHead(404);
				res.end("that profile does not exist");
			}
			else
			{
				res.render('user/profile/index', listly.renderUtils.params(req,{title: "Profile", user: user}));
			}
		});
	};
};