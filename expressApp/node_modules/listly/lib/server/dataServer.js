
var listly = require('listly');
var util = require('util');

var ListlyDataServer = module.exports.ListlyDataServer = function (serverParts)
{
	listly.ListlyServer.apply(this, arguments);

	this.db = serverParts.db;

	this.submissionDAO = new listly.SubmissionDAO(this.db);
	this.listDAO = new listly.ListDAO(this.db);
	this.userDAO = new listly.UserDAO(this.db);
	this.indexesDAO = new listly.IndexesDAO(this.db);

	this.submissionREST = new listly.SubmissionREST(this);
	this.listREST = new listly.ListREST(this);
	this.userREST = new listly.UserREST(this);
	this.loginREST = new listly.LoginREST(this);

	this.mapReduceService = new listly.MapReduceService(this.db);
	this.dbManager = new listly.ListlyDBManager(this);
	this.router = new listly.ListlyDataRouter(this);
};

listly.utils.inherit(ListlyDataServer, listly.ListlyServer);

ListlyDataServer.prototype.logError = function (err)
{
	this.listlyMessageService.logError(err);
};