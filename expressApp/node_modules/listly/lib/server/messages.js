
var ironMQ = require('./ironMQ');
var json = require('json');

module.exports.createMessageService = function ()
{
	return new ListlyMessageService(ironMQ.createMessageProvider());
};

var ListlyMessageService = function (messageProvider)
{
	var self = this;

	this.messageProvider = messageProvider;
};

ListlyMessageService.prototype.handleNewSubmission = function (submission)
{
	var activity = {
		userId: submission.userId,
		submissionId: submission._id
	};

	this.messageProvider.putMessage("pendingActivity",json.stringify(activity));
};