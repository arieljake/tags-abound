
var listly = require('listly');

var interval = undefined;

exports.start = function (serverParts, delay)
{
	var db = serverParts.db;
	var listlySocketServer = serverParts.listlySocketServer;

	if (interval === undefined)
	{
		interval = setInterval(function ()
							   {
								   listly.mapReduce.performMapReduce(db, function (results)
								   {
									   listlySocketServer.logMsg(results);
								   });
							   }, delay);
	}
};

exports.stop = function ()
{
	if (interval !== undefined)
	{
		clearInterval(interval);
		interval = undefined;
	}
}