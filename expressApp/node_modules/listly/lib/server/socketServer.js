

var ListlySocketServer = module.exports.ListlySocketServer = function (socketServer)
{
	var self = this;

	this.socketServer = socketServer;
	this.loggerSockets = [];

	this.socketServer.sockets.on('connection', function (socket) {
		self.handleConnection(socket);
	});
};

ListlySocketServer.prototype.handleConnection = function(socket)
{
	this.loggerSockets.push(socket);

	socket.on('end', function (socket)
	{
		var index = this.loggerSockets.indexOf(socket);
		this.loggerSockets.splice(index,1);
	});
};

ListlySocketServer.prototype.logMsg = function(msg)
{
	for (var i = 0; i < this.loggerSockets.length; i++)
	{
		this.loggerSockets[i].emit('broadcast_msg', msg);
	}
};