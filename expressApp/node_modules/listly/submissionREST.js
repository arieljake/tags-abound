var dao = require('listly').submissionDAO;

exports.getAllSubmissions = function (db)
{
	return function (req,res){
		dao.findAllSubmissions(db,function(items)
		{
			res.send(items);
		});
	};
};

exports.getSubmissionById = function (db,idFxn)
{
	return function (req,res){
		dao.findSubmissionById(db,idFxn(req),function(item)
		{
			res.send(item);
		});
	};
};

exports.getSubmissionListsById = function (db,idFxn)
{
	return function (req,res){
		dao.findSubmissionListsById(db,idFxn(req),function (lists)
		{
			res.send(lists);
		});
	};
};

exports.getSubmissionsByTitle = function (db,titleFxn)
{
	return function (req,res){
		dao.findSubmissionsByTitle(db,titleFxn(req),function(items)
		{
			res.send(items);
		});
	};
};

exports.saveSubmission = function (db,idFxn,submissionFxn)
{
	return function (req,res){

		var submission = submissionFxn(req);
		var id = idFxn(req);

		if (id === undefined)
		{
			dao.createSubmission(db,submission,function(submission)
			{
				res.send(submission);
			});
		}
		else
		{
			dao.updateSubmission(db,id,submission,function(submission)
			{
				res.send(submission);
			});
		}
	};
};